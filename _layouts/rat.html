<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>G√©n√©rateur de Rat R√©aliste Pixel Art</title>
<style>
body { background: #222; color: #fff; text-align:center; font-family:sans-serif; padding:2rem;}
canvas { border:2px solid #ccc; image-rendering: pixelated; }
.controls { margin-top:1rem; display:flex; justify-content:center; gap:1rem; }
button { padding:0.5rem 1rem; font-size:1rem; }
</style>
</head>
<body>

<h1>üêÄ G√©n√©rateur de Rat R√©aliste Pixel Art</h1>
<canvas id="ratCanvas" width="512" height="512"></canvas>

<div class="controls">
  <button id="newRatBtn">Nouveau Rat</button>
  <button id="downloadBtn">T√©l√©charger</button>
</div>

<script>
const canvas = document.getElementById('ratCanvas');
const ctx = canvas.getContext('2d');
ctx.imageSmoothingEnabled = false;

const PIXEL = 64; // taille de la grille pixel
const SCALE = canvas.width / PIXEL;

let seed = Math.random();

function seededRandom(seed) { const x = Math.sin(seed)*10000; return x-Math.floor(x); }
function nextRand() { seed+=1; return seededRandom(seed); }

// palettes
const bodyColors = [
  [120,120,120],[101,67,33],[40,40,40],[220,220,220],[194,178,128],[150,75,0]
];
const eyeColors = [[0,0,0],[139,69,19]];

function drawRat() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const pixels = Array.from({length:PIXEL},()=>Array(PIXEL).fill([0,0,0,0]));

  const bodyColor = bodyColors[Math.floor(nextRand()*bodyColors.length)];
  const eyeColor = eyeColors[Math.floor(nextRand()*eyeColors.length)];

  const centerX = PIXEL/2;
  const centerY = PIXEL*0.6;

  // Corps ovale
  for(let y=-10;y<=10;y++){
    for(let x=-18;x<=18;x++){
      let px = centerX + x;
      let py = centerY + y;
      if(px>=0 && px<PIXEL && py>=0 && py<PIXEL){
        pixels[py][px] = [...bodyColor,255];
      }
    }
  }

  // T√™te ovale (museau)
  for(let y=-8;y<=8;y++){
    for(let x=15;x<=25;x++){
      let px = centerX + x;
      let py = centerY + y;
      if(px>=0 && px<PIXEL && py>=0 && py<PIXEL){
        pixels[py][px] = [...bodyColor,255];
      }
    }
  }

  // Yeux
  pixels[centerY-3][centerX+22] = [...eyeColor[0],255];
  pixels[centerY+3][centerX+22] = [...eyeColor[0],255];

  // Oreilles
  pixels[centerY-8][centerX+17] = [...bodyColor,255];
  pixels[centerY+8][centerX+17] = [...bodyColor,255];

  // Queue fine
  for(let i=0;i<20;i++){
    let px = centerX-18-i;
    let py = centerY + Math.floor(nextRand()*4-2);
    if(px>=0 && px<PIXEL && py>=0 && py<PIXEL){
      pixels[py][px] = [...bodyColor,255];
    }
  }

  // Pattes simples
  pixels[centerY+10][centerX-5] = [...bodyColor,255];
  pixels[centerY+10][centerX+5] = [...bodyColor,255];

  // dessiner pixels
  for(let y=0;y<PIXEL;y++){
    for(let x=0;x<PIXEL;x++){
      const p = pixels[y][x];
      if(p[3]===0) continue;
      ctx.fillStyle = `rgba(${p[0]},${p[1]},${p[2]},${p[3]/255})`;
      ctx.fillRect(x*SCALE,y*SCALE,SCALE,SCALE);
    }
  }
}

document.getElementById('newRatBtn').addEventListener('click',()=>{ seed=Math.random(); drawRat(); });
document.getElementById('downloadBtn').addEventListener('click',()=>{
  const link=document.createElement('a'); link.download=`rat_${Date.now()}.png`;
  link.href=canvas.toDataURL(); link.click();
});

drawRat();
</script>

</body>
</html>
